<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ESHOL</title>

    <style>
      * {
        font-family: Arial, Helvetica, sans-serif;
      }

      body,
      html {
        background-color: #222122;
        margin: 0px;
        padding: 0px;
        overflow: hidden;

        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      /* #svg-pitch-bar-indicator {
			position: absolute;
			top: 434px;
			left: 565px;
		} */

      #svg {
        position: absolute;
        top: 0;
        left: 70px;
        right: 0;
        bottom: 20px;
        margin: auto;
      }

      /* #svg-roll-bar-indicator {
			position: absolute;
			top: 838px;
			left: 922px;
		} */
    </style>
  </head>

  <body>
    <svg
      id="svg"
      version="1.1"
      xml:space="preserve"
      viewBox="-120 -20 1670 920"
      width="1920"
      height="1080"
      enable-background="new -120 -20 1670 920"
    >
      <style>
        * {
          font-family: Arial, Helvetica, sans-serif;
        }
      </style>
    </svg>

    <script src="../node_modules/jquery/dist/jquery.slim.min.js"></script>
    <!-- <script src="../assets/js/TweenMax.js"></script> -->
    <script src="../node_modules/snapsvg/dist/snap.svg.js"></script>
    <!--
      <script src="../node_modules/greensock/dist/TweenMax.js"></script>
      <script src="../node_modules/greensock/dist/jquery.gsap.js"></script>
    -->
    <!-- <script src="../app/controller.js"></script> -->
    <script src="../app/buttons.js"></script>
    <script src="../app/model.js"></script>
    <script src="../app/declarations.js"></script>
    <script src="../app/initialise.js"></script>
    <script src="../app/functions.js"></script>
    <script src="../app/events.js"></script>

    <script>
      window.onload = function() {
        var viewBox;
        var s;
        var screenWidth;
        var screenHeight;
        var vpWidth = screenWidth;
        var vpHeight = screenHeight;
        var screenPosX;
        var screenPosY;
        var vpX;
        var vpY;

        selectedAircraft = "";

        s = Snap("#svg");

        Snap.load("../assets/panel.svg", function(f) {
          initialise(f, s);

          // weather indicator initialisation
          $("#pitch-bar-indicator").hide();
          $("#roll-bar-indicator").hide();

          // get last brightness setting
		  brightness = localStorage.getItem("brightness");
		  brightness = parseFloat(brightness).toFixed(1);
		  
          if (
            (brightness ===
              "" ||
              brightness === "undefined" ||
              brightness === null ||
              brightness < 0 ||
              brightness > 1 || isNaN(brightness))
          ) {
            localStorage.removeItem("brightness");
            brightness = parseFloat(0.5).toFixed(1);
          }
          brightnessScreen.attr({ opacity: brightness });

          // ------------------- On Off Knob ---------------------
          svgOnOffKnob.click(() => {
            doOnOffKnob(f);
          });

          svgOffKnob.click(() => {
            doOnOffKnob(f);
          });

          // ------------------- Pitch and Roll Animations ---------------------
          // console.log(pitchBarIndicator.getBBox().x + " : " + pitchBarIndicator.getBBox().y + " : " +
          // 	pitchBarIndicator.getBBox().x2 + " : " + pitchBarIndicator.getBBox().y2);
          initEvents(f);

        //   grpPlots.transform("t500, 205");

          initWeatherIndicator(f, Snap);
          // #lbl-aircraft is the label displayed on the active display
          // after the aircraft type has been
          // chosen from the previous aircraft
          // #opt-aircraft-id-indicator holds the text.
          // #lbl-aircraft-id the group for the aircraft conditions code
          // #opt-aircraft-id-indicator using this for the text for the
          // conditions code

          // show the whole panel and display ========================
          s.append(f);

          screenWidth = screen.width;
          screenHeight = screen.height;
          vpWidth = screenWidth;
          vpHeight = screenHeight;
          viewBox = "0 0 " + vpWidth + " " + vpHeight;

        //   s.attr({
        //     x: 0,
        //     y: 0,
        //     width: screenWidth,
        //     height: screenHeight,
        //     viewBox: viewBox
        //   });
        });
      };
    </script>
  </body>
</html>
